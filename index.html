<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Il Rigore della Vita</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
body {
  margin: 0;
  background: #222;
  font-family: 'Arial Black', sans-serif;
  color: white;
  text-align: center;
  overflow: hidden;
  height: 100vh;
}

#campo {
  position: relative;
  width: 100%;
  height: 100vh;
  background: url('https://images.unsplash.com/photo-1508098682722-e99c43a406b2?q=80&w=2070&auto=format&fit=crop') center bottom;
  background-size: cover;
  display: block; /* Visibile all'inizio */
}

#porta {
  position: absolute;
  top: 15%;
  left: 50%;
  transform: translateX(-50%);
  width: 280px;
  height: 150px;
  background: url('https://cdn-icons-png.flaticon.com/512/824/824559.png') no-repeat center;
  background-size: contain;
  z-index: 1;
  transition: transform 0.1s;
}

#giocatore {
  position: absolute;
  bottom: 5%;
  left: 50%;
  transform: translateX(-50%);
  width: 160px;
  height: 240px;
  background: url('https://www.transparentpng.com/download/football-player/nEY3Mh-football-player-clipart-hd.png') no-repeat center;
  background-size: contain;
  filter: drop-shadow(0 0 10px red) sepia(1) saturate(10) hue-rotate(-50deg);
  z-index: 2;
}

#pallone {
  position: absolute;
  bottom: 18%;
  left: 50%;
  transform: translateX(-50%);
  width: 55px;
  height: 55px;
  background: url('https://cdn-icons-png.flaticon.com/512/824/824513.png') no-repeat center;
  background-size: contain;
  cursor: pointer;
  z-index: 3;
  transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* Classi per gestire la visibilità */
.hidden { display: none !important; }

#domanda, #finale {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.95);
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 100;
  display: none; /* Nascosti di default */
}

/* Quando togliamo .hidden, usiamo flex */
#domanda:not(.hidden), #finale:not(.hidden) {
  display: flex;
}

h1 { font-size: 3rem; color: #ffd700; margin: 10px; }
h2 { font-size: 1.5rem; margin-bottom: 30px; padding: 0 10px; }

button {
  padding: 15px 35px;
  font-size: 20px;
  margin: 10px;
  border-radius: 50px;
  border: none;
  cursor: pointer;
  font-weight: bold;
}

.si { background: #ffd700; color: #8b0000; box-shadow: 0 0 15px #ffd700; }
.no { background: #8b0000; color: white; }
</style>
</head>
<body>

<audio id="boato">
  <source src="https://www.myinstants.com/media/sounds/soccer-crowd-cheer.mp3" type="audio/mpeg">
</audio>

<div id="campo">
  <div id="porta"></div>
  <div id="giocatore"></div>
  <div id="pallone" onclick="tira()"></div>
  <div style="position:absolute; top:5%; width:100%; font-weight:bold; text-shadow:2px 2px 5px black;">TOCCA LA PALLA E SEGNA!</div>
</div>

<div id="domanda" class="hidden">
  <h1>GOAL!!! ⚽</h1>
  <h2>Vuoi essere il nostro testimone?</h2>
  <div>
    <button class="si" onclick="vaiFinale()">SÌ, LO VOGLIO!</button>
    <button class="no" onclick="vaiFinale()">ASSOLUTAMENTE SÌ!</button>
  </div>
</div>

<div id="finale" class="hidden">
  <h1>❤️ GRAZIE ❤️</h1>
  <p style="font-size: 22px; padding: 20px; line-height: 1.5;">
    Siamo onorati di averti al nostro fianco.<br>
    Sarà un giorno indimenticabile!
  </p>
</div>

<script>
let tirato = false;

function tira() {
  if (tirato) return;
  tirato = true;

  const palla = document.getElementById("pallone");
  const audio = document.getElementById("boato");
  
  if (navigator.vibrate) navigator.vibrate(60);

  // Animazione palla
  palla.style.bottom = "75%"; 
  palla.style.width = "20px";
  palla.style.height = "20px";

  setTimeout(() => {
    if (navigator.vibrate) navigator.vibrate([200, 100, 200]);
    audio.play();
    document.getElementById("porta").style.transform = "translateX(-50%) scale(1.1)";
  }, 800);

  // Mostra domanda e nasconde campo
  setTimeout(() => {
    document.getElementById("campo").classList.add("hidden");
    document.getElementById("domanda").classList.remove("hidden");
  }, 2200);
}

function vaiFinale() {
  // Coriandoli
  confetti({
    particleCount: 150,
    spread: 70,
    origin: { y: 0.6 },
    colors: ['#ffd700', '#ff0000']
  });

  if (navigator.vibrate) navigator.vibrate(500);

  // Passaggio cruciale: nascondi domanda, mostra finale
  document.getElementById("domanda").classList.add("hidden");
  document.getElementById("finale").classList.remove("hidden");
}
</script>

</body>
</html>

